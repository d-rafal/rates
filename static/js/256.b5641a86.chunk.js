"use strict";(self.webpackChunkrates=self.webpackChunkrates||[]).push([[256],{69464:function(e,t,n){var r=n(72791),a=n(1050);t.Z=function(e){var t=(0,a.$I)();return(0,r.useEffect)((function(){t(e)}),[t,e]),null}},26256:function(e,t,n){n.r(t),n.d(t,{default:function(){return Ve}});var r=n(4942),a=n(29439),i=n(64554),o=n(20890),l=n(13967),s=n(43504),u=function(e){var t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate(),a=String(t),i=String(n);i.length<2&&(i="0"+i);var o=String(r);return o.length<2&&(o="0"+o),"".concat(a,"-").concat(i,"-").concat(o)},c=function(e){var t=new Date,n=new Date(t);return n.setDate(n.getDate()-e),[n,t]},d=function(e){return e instanceof Date&&!Number.isNaN(Number(e))},m=function(e){var t=e.match(/(\d{4})-(\d{2})-(\d{2})/);return new Date(Number(null===t||void 0===t?void 0:t[1]),Number(null===t||void 0===t?void 0:t[2])-1,Number(null===t||void 0===t?void 0:t[3]))},h={key:"time-range",allowedValues:["week","month","3months","6months","max"]},f={week:{queryValue:"week",valueInDays:7,uiName:"week"},month:{queryValue:"month",valueInDays:31,uiName:"month"},"3months":{queryValue:"3months",valueInDays:93,uiName:"3 months"},"6months":{queryValue:"6months",valueInDays:186,uiName:"6 months"},max:{queryValue:"max",valueInDays:367,uiName:"max"}},x="month",v=f.month.valueInDays,g=(f.max.valueInDays,function(e){var t,n=function(e){var t=null===e||void 0===e?void 0:e.match(/from-(\d{4}-\d{2}-\d{2})-to-(\d{4}-\d{2}-\d{2})/);if(t){var n=m(t[1]),r=m(t[2]);if(d(n)&&d(r))return[n,r]}return null}(e),r=null!==n&&void 0!==n?n:c(v),a=null;return e?(t=e,void 0!==h.allowedValues.find((function(e){return e===t}))&&(a=e,e!==x&&(r=c(f[e].valueInDays)))):a=x,{selectedDefinedValue:a,timeRangeForDataFetching:[u(r[0]),u(r[1])],timeRangeForIOFields:n}}),p=n(77478),Z=n(69464),j=n(98212),y=n(33402),b=n(72791),w=n(80184),D=function(e){var t,n=e.rates,a=e.isFetching,s=(0,l.Z)(),u=(0,b.useMemo)((function(){return null===n||void 0===n?void 0:n.reduce((function(e,t,n,r){var a=r.slice(n).reduce((function(e,t){return e.mid<t.mid?t:e})),i=a.mid-t.mid;return!e||i>e.refund?{refund:i,refundInPercentage:Math.floor(i/t.mid*100),buyDate:t.effectiveDate,sellDate:a.effectiveDate}:e}),null)}),[n]);if(a)return(0,w.jsx)(y.Z,{});var c=u?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(o.Z,{variant:"h5",sx:{minWidth:"max-content"},children:"Best investment: ".concat(Math.floor(100*u.refund)/100,"z\u0142./").concat(u.refundInPercentage,"%")}),(0,w.jsx)(o.Z,{variant:"h5",sx:{minWidth:"max-content"},children:"(sell at: ".concat(u.sellDate,")")}),(0,w.jsx)(o.Z,{variant:"h5",sx:{minWidth:"max-content"},children:"(buy at: ".concat(u.buyDate,")")})]}):(0,w.jsx)(o.Z,{children:"no date to calculate result"});return(0,w.jsx)(i.Z,{sx:(t={flex:"auto"},(0,r.Z)(t,s.breakpoints.down("lg"),{flexDirection:"column"}),(0,r.Z)(t,"opacity",a?.5:1),(0,r.Z)(t,"display","flex"),(0,r.Z)(t,"alignItems","center"),(0,r.Z)(t,"gap","0.3rem"),t),children:c})},k=n(20601),S=n(65163),I=n(90466),C=n(12891),F=n(82839),N=n(35667),V=n(22955),O=n(94666),R="CurrencyChart_reFetching__uZmkN",q=n(81694),P=n.n(q),M=function(e){var t=e.rates,n=e.isFetching,o=(0,l.Z)();return(0,w.jsx)(i.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"500px",flex:"auto",mb:"1rem"},children:(0,w.jsx)(k.h,{width:"96%",height:550,className:P()((0,r.Z)({},R,n)),children:n&&!t?(0,w.jsx)(y.Z,{variant:"rectangular",width:"100%",height:"100%",animation:"wave"}):(0,w.jsxs)(S.T,{width:730,height:250,data:t,margin:{top:10,right:30,left:0,bottom:0},children:[(0,w.jsx)("defs",{children:(0,w.jsxs)("linearGradient",{id:"colorPv",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,w.jsx)("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),(0,w.jsx)("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0})]})}),(0,w.jsx)(I.K,{dataKey:"effectiveDate"}),(0,w.jsx)(C.B,{domain:function(e){var t=(0,a.Z)(e,2),n=t[0],r=t[1],i=r-n;return[Math.floor(100*(n-.1*i))/100,Math.ceil(100*(r+.1*i))/100]}}),(0,w.jsx)(F.q,{strokeDasharray:"3 3"}),(0,w.jsx)(N.u,{labelStyle:{color:o.palette.text.primary},contentStyle:{backgroundColor:o.palette.background.default}}),(0,w.jsx)(V.u,{type:"monotone",dataKey:"mid",stroke:"#82ca9d",fillOpacity:1,fill:"url(#colorPv)",name:"rate"}),(0,w.jsx)(O.D,{})]})})})},_=n(95193),E=n(53767),A=n(1413),W=n(47630),T=n(86823),B=(0,W.ZP)((function(e){return(0,w.jsx)(T.Z,(0,A.Z)({elevation:2,square:!0},e))}))((function(e){var t=e.theme;return{border:"1px solid ".concat(t.palette.divider),"&:not(:last-child)":{},"&:before":{display:"none"}}})),z=n(3721),L=(0,W.ZP)(z.Z)((function(e){return{padding:e.theme.spacing(2),borderTop:"1px solid rgba(0, 0, 0, .125)"}})),K=n(91478),U=n(55818),G=(0,W.ZP)((function(e){return(0,w.jsx)(U.Z,(0,A.Z)({expandIcon:(0,w.jsx)(K.Z,{sx:{fontSize:"0.9rem"}}),sx:{"& .MuiAccordionSummary-content":{marginLeft:"0.5rem!important"}}},e))}))((function(e){return{backgroundColor:"dark"===e.theme.palette.mode?"rgba(255, 255, 255, .05)":"rgba(0, 0, 0, .03)",flexDirection:"row-reverse"}})),Q=n(81131),H=n(74165),X=n(15861),Y=n(44695),$=n(36151),J=n(61134),ee=n(81724),te=n(93433),ne=n(27391),re=n(20892),ae=function(e){var t=e.control,n=e.fieldName,r=e.minAllowedDate,a=e.shouldReserveSpaceForErrorMessage,i=void 0===a||a,o=e.validationRules,l=e.sx,s=void 0===l?[]:l,u=e.afterOnChangeEvent;return(0,w.jsx)(J.Qr,{name:n,control:t,rules:o,render:function(e){var t=e.field,n=e.fieldState;return(0,w.jsx)(re.M,{mask:"__.__.____",disableFuture:!0,openTo:"month",views:["year","month","day"],minDate:r,value:t.value,onChange:function(e){t.onChange(e),u&&u()},inputRef:t.ref,renderInput:function(e){var r;return(0,w.jsx)(ne.Z,(0,A.Z)((0,A.Z)({},e),{},{name:t.name,variant:"standard",error:Boolean(n.error),helperText:n.error?null===(r=n.error)||void 0===r?void 0:r.message:i?" ":"",onBlur:t.onBlur,sx:(0,te.Z)(Array.isArray(s)?s:[s])}))}})}})},ie=function(e,t,n,r){var a=new URLSearchParams(e);r?a.set(n,r):a.delete(n),t(a)},oe=function(e,t,n){(0,b.useEffect)((function(){var r=g(e).timeRangeForIOFields;if(r){var a=r[0],i=r[1];a!==n("start-date")&&t("start-date",a,{shouldValidate:!0}),i!==n("end-date")&&t("end-date",i,{shouldValidate:!0})}}),[e,t,n])},le=n(20068),se=n(13400),ue=n(80022),ce=function(e){var t=e.searchParams,n=e.setSearchParams,r=e.reset;return(0,w.jsx)(le.Z,{title:"Clear time range selection",children:(0,w.jsx)(se.Z,{type:"button","aria-label":"clear filter",onClick:function(){r(),function(e,t,n){var r=new URLSearchParams(e);r.delete(n),t(r)}(t,n,h.key)},sx:{padding:0,ml:"0.5rem"},children:(0,w.jsx)(ue.Z,{sx:{fontSize:"2.5rem"}})})})},de=new Date(2014,0,1,0,0,0),me=ee.hT().typeError("Invalid date").required("Required").min(de,"min: ".concat(de.toLocaleDateString("pl-PL"))).test({name:"future date",message:function(e){return"future date not allowed"},test:function(e){return Boolean(d(e)&&function(e){var t=(new Date).toISOString().split(":")[0];return e.toISOString().split(":")[0].localeCompare(t)<0}(e))}}),he=ee.Ry({"start-date":ee.hT().concat(me),"end-date":ee.hT().concat(me).when("start-date",(function(e,t){return d(e)?t.min(e,"End date before start date"):t}))}).required(),fe=function(){var e=(0,l.Z)(),t=(0,_.Z)(e.breakpoints.down("sm")),n=(0,_.Z)(e.breakpoints.down("md")),o=(0,s.lr)(),c=(0,a.Z)(o,2),d=c[0],m=c[1],f=(0,J.cI)({defaultValues:{"start-date":null,"end-date":null},mode:"all",criteriaMode:"firstError",shouldUnregister:!0,resolver:(0,Y.X)(he)}),x=f.handleSubmit,v=f.reset,p=f.setValue,Z=f.getValues,j=f.control,y=f.watch,b=f.formState.errors,D=f.trigger,k=d.get(h.key);oe(k,p,Z);var S=g(k).timeRangeForIOFields,I=y("start-date"),C=function(){var e=(0,X.Z)((0,H.Z)().mark((function e(t){var n,r;return(0,H.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t["start-date"],r=t["end-date"],ie(d,m,h.key,"from-"+u(n)+"-to-"+u(r));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,w.jsx)("form",{noValidate:!0,onSubmit:x(C),children:(0,w.jsxs)(E.Z,{spacing:t?2:3,direction:n?"column":"row",alignItems:"start",justifyContent:"center",sx:(0,r.Z)({flexWrap:"wrap"},e.breakpoints.up("xl"),{paddingTop:"1.4rem"}),children:[(0,w.jsx)(ae,{fieldName:"start-date",control:j,minAllowedDate:de,shouldReserveSpaceForErrorMessage:!n,afterOnChangeEvent:function(){return D("end-date")}}),(0,w.jsx)(ae,{fieldName:"end-date",control:j,minAllowedDate:I||de,shouldReserveSpaceForErrorMessage:!n}),(0,w.jsxs)(i.Z,{children:[(0,w.jsx)($.Z,{type:"submit",size:"large",variant:"outlined",disabled:Boolean(Object.keys(b).length),children:"Select time range"}),null!==S?(0,w.jsx)(ce,{searchParams:d,setSearchParams:m,reset:v}):null]})]})})},xe=b.memo(fe),ve=n(72466),ge=n(90388),pe=function(){var e=(0,l.Z)(),t=(0,_.Z)(e.breakpoints.down("sm")),n=(0,s.lr)(),r=(0,a.Z)(n,2),i=r[0],o=r[1],u=i.get(h.key),c=g(u).selectedDefinedValue;return(0,w.jsxs)(ve.Z,{value:c,exclusive:!0,onChange:function(e,t){ie(i,o,h.key,t)},"aria-label":"text alignment",size:t?"small":"medium",children:[(0,w.jsx)(ge.Z,{value:f.week.queryValue,"aria-label":"centered",children:f.week.uiName}),(0,w.jsx)(ge.Z,{value:f.month.queryValue,"aria-label":"centered",children:f.month.uiName}),(0,w.jsx)(ge.Z,{value:f["3months"].queryValue,"aria-label":"centered",children:f["3months"].uiName}),(0,w.jsx)(ge.Z,{value:f["6months"].queryValue,"aria-label":"centered",children:f["6months"].uiName}),(0,w.jsx)(ge.Z,{value:f.max.queryValue,"aria-label":"centered",children:f.max.uiName})]})},Ze=function(){var e=(0,l.Z)(),t=((0,_.Z)(e.breakpoints.down("sm")),(0,_.Z)(e.breakpoints.down("xl"))),n=(0,_.Z)(e.breakpoints.only("lg"));return(0,w.jsx)(i.Z,{sx:{pt:"0.0rem",flexGrow:0},children:(0,w.jsxs)(E.Z,{spacing:4,direction:t?"column":"row",alignItems:n?"end":"center",justifyContent:"center",sx:{flexWrap:"wrap"},children:[(0,w.jsx)(pe,{}),(0,w.jsx)(xe,{})]})})},je=b.memo(Ze),ye=n(68096),be=n(94925),we=n(99321),De=n(23786),ke=n(22730),Se=function(e){return function(e,t,n){var r=t;return n(e)&&(r=e),r}(e.get(ke.yy),ke.QR,ke.vp)},Ie=function(){var e=(0,s.lr)(),t=(0,a.Z)(e,2),n=t[0],r=t[1],i=Se(n);return(0,w.jsxs)(ye.Z,{variant:"standard",sx:{m:0,minWidth:"6rem"},children:[(0,w.jsx)(be.Z,{id:"select-currency-label",children:"Select currency"}),(0,w.jsxs)(we.Z,{labelId:"select-currency-label",id:"select-currency",value:i,onChange:function(e){ie(n,r,ke.yy,e.target.value)},label:"Select currency",autoWidth:!0,children:[(0,w.jsx)(De.Z,{value:ke.sd,children:ke.sd}),(0,w.jsx)(De.Z,{value:ke.C5,children:ke.C5})]})]})},Ce=b.memo(Ie),Fe=function(){var e=(0,b.useState)(!0),t=(0,a.Z)(e,2),n=t[0],r=t[1],s=(0,l.Z)(),u=(0,_.Z)(s.breakpoints.up("lg"));return(0,w.jsx)(i.Z,{component:"section",children:(0,w.jsxs)(B,{expanded:n,onChange:function(){return r((function(e){return!e}))},sx:{mb:"2rem!Important"},children:[(0,w.jsx)(G,{expandIcon:(0,w.jsx)(Q.Z,{}),"aria-controls":"filter-content",id:"filter-header",children:(0,w.jsx)(o.Z,{children:"Select Criteria"})}),(0,w.jsx)(L,{sx:{pb:{xs:"2.5rem",lg:"1.5rem"},pt:"1.3rem"},children:(0,w.jsxs)(E.Z,{direction:u?"row":"column",alignItems:u?"start":"center",justifyContent:u?"space-between":"center",spacing:4,sx:{flexWrap:"wrap"},children:[(0,w.jsx)(Ce,{}),(0,w.jsx)(je,{})]})})]})})},Ne=b.memo(Fe),Ve=function(){var e,t,n=(0,l.Z)();(0,Z.Z)(j.a.text);var u=(0,s.lr)(),c=(0,a.Z)(u,1)[0],d=Se(c),m=g(c.get(h.key)),f=(0,a.Z)(m.timeRangeForDataFetching,2),x=f[0],v=f[1],y=(0,p.NO)({selectedCurrency:d,startDate:x,endDate:v},{refetchOnMountOrArgChange:!0,refetchOnFocus:!0,refetchOnReconnect:!0}),b=y.isFetching,k=y.currentData;return(0,w.jsxs)(i.Z,{sx:{display:"flex",flex:"auto",flexDirection:"column"},children:[(0,w.jsx)(Ne,{}),(0,w.jsx)(i.Z,{component:"section",sx:{maxWidth:"100%"},children:(0,w.jsx)(o.Z,{variant:"h5",component:"h1",sx:(0,r.Z)({mb:"1rem"},n.breakpoints.down("sm"),{textAlign:"center"}),children:"Actual rate ".concat(d,"/PLN: ").concat(null!==(e=null===k||void 0===k||null===(t=k.rates.at(-1))||void 0===t?void 0:t.mid)&&void 0!==e?e:"-"," z\u0142.")})}),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(M,{rates:null===k||void 0===k?void 0:k.rates,isFetching:b}),(0,w.jsx)(D,{rates:null===k||void 0===k?void 0:k.rates,isFetching:b})]})]})}}}]);
//# sourceMappingURL=256.b5641a86.chunk.js.map