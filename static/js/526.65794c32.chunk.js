"use strict";(self.webpackChunkrates=self.webpackChunkrates||[]).push([[526],{69464:function(e,n,t){var r=t(72791),a=t(1050);n.Z=function(e){var n=(0,a.$I)();return(0,r.useEffect)((function(){n(e)}),[n,e]),null}},14526:function(e,n,t){t.r(n),t.d(n,{default:function(){return Ne}});var r=t(4942),a=t(29439),i=t(64554),l=t(20890),o=t(13967),s=t(43504),u=function(e){var n=e.getFullYear(),t=e.getMonth()+1,r=e.getDate(),a=String(n),i=String(t);i.length<2&&(i="0"+i);var l=String(r);return l.length<2&&(l="0"+l),"".concat(a,"-").concat(i,"-").concat(l)},c=function(e){var n=new Date,t=new Date(n);return t.setDate(t.getDate()-e),[t,n]},d=function(e){return e instanceof Date&&!Number.isNaN(Number(e))},m=function(e){var n=e.match(/(\d{4})-(\d{2})-(\d{2})/);return new Date(Number(null===n||void 0===n?void 0:n[1]),Number(null===n||void 0===n?void 0:n[2])-1,Number(null===n||void 0===n?void 0:n[3]))},h={key:"time-range",allowedValues:["week","month","3months","6months","max"]},f={week:{queryValue:"week",valueInDays:7,uiName:"week"},month:{queryValue:"month",valueInDays:31,uiName:"month"},"3months":{queryValue:"3months",valueInDays:93,uiName:"3 months"},"6months":{queryValue:"6months",valueInDays:186,uiName:"6 months"},max:{queryValue:"max",valueInDays:367,uiName:"max"}},x="month",v=f.month.valueInDays,g=(f.max.valueInDays,function(e){var n,t=function(e){var n=null===e||void 0===e?void 0:e.match(/from-(\d{4}-\d{2}-\d{2})-to-(\d{4}-\d{2}-\d{2})/);if(n){var t=m(n[1]),r=m(n[2]);if(d(t)&&d(r))return[t,r]}return null}(e),r=null!==t&&void 0!==t?t:c(v),a=null;return e?(n=e,void 0!==h.allowedValues.find((function(e){return e===n}))&&(a=e,e!==x&&(r=c(f[e].valueInDays)))):a=x,{selectedDefinedValue:a,timeRangeForDataFetching:[u(r[0]),u(r[1])],timeRangeForIOFields:t}}),Z=t(77478),p=t(69464),j=t(98212),y=t(33402),b=t(72791),w=t(80184),D=function(e){var n,t=e.rates,a=e.isFetching,s=(0,o.Z)(),u=(0,b.useMemo)((function(){return null===t||void 0===t?void 0:t.reduce((function(e,n,t,r){var a=r.slice(t).reduce((function(e,n){return e.mid<n.mid?n:e})),i=a.mid-n.mid;return!e||i>e.refund?{refund:i,refundInPercentage:Math.floor(i/n.mid*100),buyDate:n.effectiveDate,sellDate:a.effectiveDate}:e}),null)}),[t]);if(a)return(0,w.jsx)(y.Z,{});var c=u?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(l.Z,{variant:"h5",sx:{minWidth:"max-content"},children:"Best investment: ".concat(Math.floor(100*u.refund)/100,"z\u0142./").concat(u.refundInPercentage,"%")}),(0,w.jsx)(l.Z,{variant:"h5",sx:{minWidth:"max-content"},children:"(sell at: ".concat(u.sellDate,")")}),(0,w.jsx)(l.Z,{variant:"h5",sx:{minWidth:"max-content"},children:"(buy at: ".concat(u.buyDate,")")})]}):(0,w.jsx)(l.Z,{children:"no date to calculate result"});return(0,w.jsx)(i.Z,{sx:(n={flex:"auto"},(0,r.Z)(n,s.breakpoints.down("lg"),{flexDirection:"column"}),(0,r.Z)(n,"opacity",a?.5:1),(0,r.Z)(n,"display","flex"),(0,r.Z)(n,"alignItems","center"),(0,r.Z)(n,"gap","0.3rem"),n),children:c})},k=t(20601),I=t(65163),F=t(90466),N=t(12891),S=t(82839),C=t(35667),V=t(22955),q=t(94666),R="CurrencyChart_reFetching__uZmkN",P=t(81694),M=t.n(P),O=function(e){var n=e.rates,t=e.isFetching,l=(0,o.Z)();return(0,w.jsx)(i.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"500px",flex:"auto",mb:"1rem"},children:(0,w.jsx)(k.h,{width:"96%",height:550,className:M()((0,r.Z)({},R,t)),children:t&&!n?(0,w.jsx)(y.Z,{variant:"rectangular",width:"100%",height:"100%",animation:"wave"}):(0,w.jsxs)(I.T,{width:730,height:250,data:n,margin:{top:10,right:30,left:0,bottom:0},children:[(0,w.jsx)("defs",{children:(0,w.jsxs)("linearGradient",{id:"colorPv",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,w.jsx)("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),(0,w.jsx)("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0})]})}),(0,w.jsx)(F.K,{dataKey:"effectiveDate"}),(0,w.jsx)(N.B,{domain:function(e){var n=(0,a.Z)(e,2),t=n[0],r=n[1],i=r-t;return[Math.floor(100*(t-.1*i))/100,Math.ceil(100*(r+.1*i))/100]}}),(0,w.jsx)(S.q,{strokeDasharray:"3 3"}),(0,w.jsx)(C.u,{labelStyle:{color:l.palette.text.primary},contentStyle:{backgroundColor:l.palette.background.default}}),(0,w.jsx)(V.u,{type:"monotone",dataKey:"mid",stroke:"#82ca9d",fillOpacity:1,fill:"url(#colorPv)",name:"rate"}),(0,w.jsx)(q.D,{})]})})})},_=t(95193),W=t(53767),E=t(1413),A=t(47630),z=t(86823),B=(0,A.ZP)((function(e){return(0,w.jsx)(z.Z,(0,E.Z)({elevation:2,square:!0},e))}))((function(e){var n=e.theme;return{border:"1px solid ".concat(n.palette.divider),"&:not(:last-child)":{},"&:before":{display:"none"}}})),T=t(3721),L=(0,A.ZP)(T.Z)((function(e){return{padding:e.theme.spacing(2),borderTop:"1px solid rgba(0, 0, 0, .125)"}})),K=t(91478),U=t(55818),G=(0,A.ZP)((function(e){return(0,w.jsx)(U.Z,(0,E.Z)({expandIcon:(0,w.jsx)(K.Z,{sx:{fontSize:"0.9rem"}}),sx:{"& .MuiAccordionSummary-content":{marginLeft:"0.5rem!important"}}},e))}))((function(e){return{backgroundColor:"dark"===e.theme.palette.mode?"rgba(255, 255, 255, .05)":"rgba(0, 0, 0, .03)",flexDirection:"row-reverse"}})),Q=t(81131),H=t(74165),X=t(15861),Y=t(44695),$=t(36151),J=t(61134),ee=t(81724),ne=t(27391),te=t(20892),re=function(e){var n=e.control,t=e.fieldName,r=e.minAllowedDate,a=e.shouldReserveSpaceForErrorMessage,i=void 0===a||a,l=e.validationRules;return(0,w.jsx)(J.Qr,{name:t,control:n,rules:l,render:function(e){var n=e.field,t=e.fieldState;return(0,w.jsx)(te.M,{mask:"__.__.____",disableFuture:!0,openTo:"month",views:["year","month","day"],minDate:r,value:n.value,onChange:n.onChange,inputRef:n.ref,renderInput:function(e){var r;return(0,w.jsx)(ne.Z,(0,E.Z)((0,E.Z)({},e),{},{name:n.name,variant:"standard",error:Boolean(t.error),helperText:t.error?null===(r=t.error)||void 0===r?void 0:r.message:i?" ":"",onBlur:n.onBlur}))}})}})},ae=function(e,n,t,r){var a=new URLSearchParams(e);r?a.set(t,r):a.delete(t),n(a)},ie=function(e,n,t){(0,b.useEffect)((function(){var r=g(e).timeRangeForIOFields;if(r){var a=r[0],i=r[1];a!==t("start-date")&&n("start-date",a,{shouldValidate:!0}),i!==t("end-date")&&n("end-date",i,{shouldValidate:!0})}}),[e,n,t])},le=t(13400),oe=t(80022),se=function(e){var n=e.searchParams,t=e.setSearchParams,r=e.reset;return(0,w.jsx)(le.Z,{type:"button","aria-label":"clear filter",onClick:function(){r(),function(e,n,t){var r=new URLSearchParams(e);r.delete(t),n(r)}(n,t,h.key)},children:(0,w.jsx)(oe.Z,{sx:{fontSize:"3rem"}})})},ue=new Date(2014,0,1,0,0,0),ce=ee.Ry({"start-date":ee.hT().typeError("Invalid date").required("Required"),"end-date":ee.hT().typeError("Invalid date").required("Required")}).required(),de=function(){var e=(0,o.Z)(),n=(0,_.Z)(e.breakpoints.down("sm")),t=(0,_.Z)(e.breakpoints.down("md")),r=(0,s.lr)(),l=(0,a.Z)(r,2),c=l[0],d=l[1],m=(0,J.cI)({defaultValues:{"start-date":null,"end-date":null},mode:"all",criteriaMode:"firstError",shouldUnregister:!0,resolver:(0,Y.X)(ce)}),f=m.handleSubmit,x=m.reset,v=m.setValue,Z=m.getValues,p=m.control,j=m.watch,y=m.formState.errors,b=c.get(h.key);ie(b,v,Z);var D=g(b).timeRangeForIOFields,k=j("start-date"),I=function(){var e=(0,X.Z)((0,H.Z)().mark((function e(n){var t,r;return(0,H.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n["start-date"],r=n["end-date"],ae(c,d,h.key,"from-"+u(t)+"-to-"+u(r));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,w.jsx)("form",{noValidate:!0,onSubmit:f(I),children:(0,w.jsxs)(W.Z,{spacing:n?2:3,direction:t?"column":"row",alignItems:"center",justifyContent:"center",sx:{flexWrap:"wrap"},children:[(0,w.jsx)(re,{fieldName:"start-date",control:p,minAllowedDate:ue,shouldReserveSpaceForErrorMessage:!1}),(0,w.jsx)(re,{fieldName:"end-date",control:p,minAllowedDate:k||ue,shouldReserveSpaceForErrorMessage:!1}),(0,w.jsxs)(i.Z,{children:[(0,w.jsx)($.Z,{type:"submit",size:"large",variant:"outlined",disabled:Boolean(Object.keys(y).length),children:"Select time range"}),null!==D?(0,w.jsx)(se,{searchParams:c,setSearchParams:d,reset:x}):null]})]})})},me=b.memo(de),he=t(72466),fe=t(90388),xe=function(){var e=(0,o.Z)(),n=(0,_.Z)(e.breakpoints.down("sm")),t=(0,s.lr)(),r=(0,a.Z)(t,2),i=r[0],l=r[1],u=i.get(h.key),c=g(u).selectedDefinedValue;return(0,w.jsxs)(he.Z,{value:c,exclusive:!0,onChange:function(e,n){ae(i,l,h.key,n)},"aria-label":"text alignment",size:n?"small":"medium",children:[(0,w.jsx)(fe.Z,{value:f.week.queryValue,"aria-label":"centered",children:f.week.uiName}),(0,w.jsx)(fe.Z,{value:f.month.queryValue,"aria-label":"centered",children:f.month.uiName}),(0,w.jsx)(fe.Z,{value:f["3months"].queryValue,"aria-label":"centered",children:f["3months"].uiName}),(0,w.jsx)(fe.Z,{value:f["6months"].queryValue,"aria-label":"centered",children:f["6months"].uiName}),(0,w.jsx)(fe.Z,{value:f.max.queryValue,"aria-label":"centered",children:f.max.uiName})]})},ve=function(){var e=(0,o.Z)(),n=((0,_.Z)(e.breakpoints.down("sm")),(0,_.Z)(e.breakpoints.down("xl"))),t=(0,_.Z)(e.breakpoints.only("lg"));return(0,w.jsx)(i.Z,{sx:{pt:"0.0rem",flexGrow:0},children:(0,w.jsxs)(W.Z,{spacing:4,direction:n?"column":"row",alignItems:t?"end":"center",justifyContent:"center",sx:{flexWrap:"wrap"},children:[(0,w.jsx)(xe,{}),(0,w.jsx)(me,{})]})})},ge=b.memo(ve),Ze=t(68096),pe=t(94925),je=t(99321),ye=t(23786),be=t(22730),we=function(e){return function(e,n,t){var r=n;return t(e)&&(r=e),r}(e.get(be.yy),be.QR,be.vp)},De=function(){var e=(0,s.lr)(),n=(0,a.Z)(e,2),t=n[0],r=n[1],i=we(t);return(0,w.jsxs)(Ze.Z,{variant:"standard",sx:{m:0,minWidth:"6rem"},children:[(0,w.jsx)(pe.Z,{id:"select-currency-label",children:"Select currency"}),(0,w.jsxs)(je.Z,{labelId:"select-currency-label",id:"select-currency",value:i,onChange:function(e){ae(t,r,be.yy,e.target.value)},label:"Select currency",autoWidth:!0,children:[(0,w.jsx)(ye.Z,{value:be.sd,children:be.sd}),(0,w.jsx)(ye.Z,{value:be.C5,children:be.C5})]})]})},ke=b.memo(De),Ie=function(){var e=(0,b.useState)(!0),n=(0,a.Z)(e,2),t=n[0],r=n[1],s=(0,o.Z)(),u=(0,_.Z)(s.breakpoints.up("lg"));return(0,w.jsx)(i.Z,{component:"section",children:(0,w.jsxs)(B,{expanded:t,onChange:function(){return r((function(e){return!e}))},sx:{mb:"2rem!Important"},children:[(0,w.jsx)(G,{expandIcon:(0,w.jsx)(Q.Z,{}),"aria-controls":"filter-content",id:"filter-header",children:(0,w.jsx)(l.Z,{children:"Select Criteria"})}),(0,w.jsx)(L,{sx:{mb:{xs:"1.3rem",lg:"0.5rem"},pt:"1.5rem"},children:(0,w.jsxs)(W.Z,{direction:u?"row":"column",alignItems:u?"start":"center",justifyContent:u?"space-between":"center",spacing:4,sx:{flexWrap:"wrap"},children:[(0,w.jsx)(ke,{}),(0,w.jsx)(ge,{})]})})]})})},Fe=b.memo(Ie),Ne=function(){var e,n,t=(0,o.Z)();(0,p.Z)(j.a.text);var u=(0,s.lr)(),c=(0,a.Z)(u,1)[0],d=we(c),m=g(c.get(h.key)),f=(0,a.Z)(m.timeRangeForDataFetching,2),x=f[0],v=f[1],y=(0,Z.NO)({selectedCurrency:d,startDate:x,endDate:v},{refetchOnMountOrArgChange:!0,refetchOnFocus:!0,refetchOnReconnect:!0}),b=y.isFetching,k=y.currentData;return(0,w.jsxs)(i.Z,{sx:{display:"flex",flex:"auto",flexDirection:"column"},children:[(0,w.jsx)(Fe,{}),(0,w.jsx)(i.Z,{component:"section",sx:{maxWidth:"100%"},children:(0,w.jsx)(l.Z,{variant:"h5",component:"h1",sx:(0,r.Z)({mb:"1rem"},t.breakpoints.down("sm"),{textAlign:"center"}),children:"Actual rate ".concat(d,"/PLN: ").concat(null!==(e=null===k||void 0===k||null===(n=k.rates.at(-1))||void 0===n?void 0:n.mid)&&void 0!==e?e:"-"," z\u0142.")})}),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(O,{rates:null===k||void 0===k?void 0:k.rates,isFetching:b}),(0,w.jsx)(D,{rates:null===k||void 0===k?void 0:k.rates,isFetching:b})]})]})}}}]);
//# sourceMappingURL=526.65794c32.chunk.js.map