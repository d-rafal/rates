"use strict";(self.webpackChunkrates=self.webpackChunkrates||[]).push([[526],{69464:function(e,n,t){var r=t(72791),a=t(1050);n.Z=function(e){var n=(0,a.$I)();return(0,r.useEffect)((function(){n(e)}),[n,e]),null}},14526:function(e,n,t){t.r(n),t.d(n,{default:function(){return Ie}});var r=t(29439),a=t(64554),i=t(20890),o=t(43504),l=function(e){var n=e.getFullYear(),t=e.getMonth()+1,r=e.getDate(),a=String(n),i=String(t);i.length<2&&(i="0"+i);var o=String(r);return o.length<2&&(o="0"+o),"".concat(a,"-").concat(i,"-").concat(o)},s=function(e){var n=new Date,t=new Date(n);return t.setDate(t.getDate()-e),[t,n]},u=function(e){return e instanceof Date&&!Number.isNaN(Number(e))},c=function(e){var n=e.match(/(\d{4})-(\d{2})-(\d{2})/);return new Date(Number(null===n||void 0===n?void 0:n[1]),Number(null===n||void 0===n?void 0:n[2])-1,Number(null===n||void 0===n?void 0:n[3]))},d={key:"time-range",allowedValues:["week","month","3months","6months","max"]},m={week:{queryValue:"week",valueInDays:7,uiName:"week"},month:{queryValue:"month",valueInDays:31,uiName:"month"},"3months":{queryValue:"3months",valueInDays:93,uiName:"3 months"},"6months":{queryValue:"6months",valueInDays:186,uiName:"6 months"},max:{queryValue:"max",valueInDays:367,uiName:"max"}},h="month",f=m.month.valueInDays,x=(m.max.valueInDays,function(e){var n,t=null,r=function(e){var n=null===e||void 0===e?void 0:e.match(/from-(\d{4}-\d{2}-\d{2})-to-(\d{4}-\d{2}-\d{2})/);if(n){var t=c(null===n||void 0===n?void 0:n[1]),r=c(null===n||void 0===n?void 0:n[2]);if(u(t)&&u(r))return[t,r]}return null}(e),a=null!==r&&void 0!==r?r:s(f);return e?(n=e,void 0!==d.allowedValues.find((function(e){return e===n}))&&(t=e,e!==h&&(a=s(m[e].valueInDays)))):t=h,{selectedDefinedValue:t,timeRangeForDataFetching:[l(a[0]),l(a[1])],timeRangeForIOFields:r}}),v=t(77478),g=t(69464),p=t(98212),j=t(33402),y=t(72791),Z=t(80184),b=function(e){var n=e.rates,t=e.isFetching,r=(0,y.useMemo)((function(){return null===n||void 0===n?void 0:n.reduce((function(e,n,t,r){var a=r.slice(t).reduce((function(e,n){return e.mid<n.mid?n:e})),i=a.mid-n.mid;return!e||i>e.refund?{refund:i,refundInPercentage:Math.floor(i/n.mid*100),buyDate:n.effectiveDate,sellDate:a.effectiveDate}:e}),null)}),[n]),a=t?(0,Z.jsx)(j.Z,{}):r?"Best investment: ".concat(Math.floor(100*r.refund)/100,"z\u0142./").concat(r.refundInPercentage,"% (buy at: ").concat(r.buyDate,", sell at: ").concat(r.sellDate,")"):"no date to calculate result";return(0,Z.jsx)(i.Z,{variant:"h4",sx:{flex:"auto",opacity:t?.5:1},children:a})},w=t(4942),D=t(20601),k=t(65163),N=t(90466),F=t(12891),I=t(82839),C=t(35667),S=t(22955),V=t(94666),R="CurrencyChart_reFetching__uZmkN",q=t(81694),P=t.n(q),M=function(e){var n=e.rates,t=e.isFetching;return(0,Z.jsx)(a.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"500px",flex:"auto"},children:(0,Z.jsx)(D.h,{width:"96%",height:500,className:P()((0,w.Z)({},R,t)),children:t&&!n?(0,Z.jsx)(j.Z,{variant:"rectangular",width:"100%",height:"100%",animation:"wave"}):(0,Z.jsxs)(k.T,{width:730,height:250,data:n,margin:{top:10,right:30,left:0,bottom:0},children:[(0,Z.jsx)("defs",{children:(0,Z.jsxs)("linearGradient",{id:"colorPv",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,Z.jsx)("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),(0,Z.jsx)("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0})]})}),(0,Z.jsx)(N.K,{dataKey:"effectiveDate"}),(0,Z.jsx)(F.B,{domain:function(e){var n=(0,r.Z)(e,2),t=n[0],a=n[1],i=a-t;return[Math.floor(100*(t-.1*i))/100,Math.ceil(100*(a+.1*i))/100]}}),(0,Z.jsx)(I.q,{strokeDasharray:"3 3"}),(0,Z.jsx)(C.u,{}),(0,Z.jsx)(S.u,{type:"monotone",dataKey:"mid",stroke:"#82ca9d",fillOpacity:1,fill:"url(#colorPv)",name:"rate"}),(0,Z.jsx)(V.D,{})]})})})},O=t(13967),_=t(95193),A=t(53767),B=t(1413),E=t(47630),T=t(86823),W=(0,E.ZP)((function(e){return(0,Z.jsx)(T.Z,(0,B.Z)({elevation:2,square:!0},e))}))((function(e){var n=e.theme;return{border:"1px solid ".concat(n.palette.divider),"&:not(:last-child)":{},"&:before":{display:"none"}}})),z=t(3721),L=(0,E.ZP)(z.Z)((function(e){return{padding:e.theme.spacing(2),borderTop:"1px solid rgba(0, 0, 0, .125)"}})),K=t(91478),U=t(55818),G=(0,E.ZP)((function(e){return(0,Z.jsx)(U.Z,(0,B.Z)({expandIcon:(0,Z.jsx)(K.Z,{sx:{fontSize:"0.9rem"}}),sx:{"& .MuiAccordionSummary-content":{marginLeft:"0.5rem!important"}}},e))}))((function(e){return{backgroundColor:"dark"===e.theme.palette.mode?"rgba(255, 255, 255, .05)":"rgba(0, 0, 0, .03)",flexDirection:"row-reverse"}})),Q=t(81131),H=t(72466),X=t(90388),Y=function(e,n,t,r){var a=new URLSearchParams(e);r?a.set(t,r):a.delete(t),n(a)},$=function(){var e=(0,o.lr)(),n=(0,r.Z)(e,2),t=n[0],a=n[1],i=t.get(d.key),l=x(i).selectedDefinedValue;return(0,Z.jsxs)(H.Z,{value:l,exclusive:!0,onChange:function(e,n){Y(t,a,d.key,n)},"aria-label":"text alignment",children:[(0,Z.jsx)(X.Z,{value:m.week.queryValue,"aria-label":"centered",children:m.week.uiName}),(0,Z.jsx)(X.Z,{value:m.month.queryValue,"aria-label":"centered",children:m.month.uiName}),(0,Z.jsx)(X.Z,{value:m["3months"].queryValue,"aria-label":"centered",children:m["3months"].uiName}),(0,Z.jsx)(X.Z,{value:m["6months"].queryValue,"aria-label":"centered",children:m["6months"].uiName}),(0,Z.jsx)(X.Z,{value:m.max.queryValue,"aria-label":"centered",children:m.max.uiName})]})},J=t(74165),ee=t(15861),ne=t(36151),te=t(61134),re=t(27391),ae=t(20892),ie=function(e){var n=e.control,t=e.fieldName,r=e.minAllowedDate,a=e.shouldReserveSpaceForErrorMessage,i=void 0===a||a,o=e.validationRules;return(0,Z.jsx)(te.Qr,{name:t,control:n,rules:o,render:function(e){var n=e.field,t=e.fieldState;return(0,Z.jsx)(ae.M,{mask:"__.__.____",disableFuture:!0,openTo:"month",views:["year","month","day"],minDate:r,value:n.value,onChange:n.onChange,inputRef:n.ref,renderInput:function(e){var r;return(0,Z.jsx)(re.Z,(0,B.Z)((0,B.Z)({},e),{},{name:n.name,variant:"standard",error:Boolean(t.error),helperText:t.error?null===(r=t.error)||void 0===r?void 0:r.message:i?" ":"",onBlur:n.onBlur}))}})}})},oe=t(13400),le=t(80022),se=function(e){var n=e.searchParams,t=e.setSearchParams,r=e.reset;return(0,Z.jsx)(oe.Z,{type:"button","aria-label":"clear filter",onClick:function(){r(),function(e,n,t){var r=new URLSearchParams(e);r.delete(t),n(r)}(n,t,d.key)},children:(0,Z.jsx)(le.Z,{sx:{fontSize:"3rem"}})})},ue=function(e,n,t){(0,y.useEffect)((function(){var r=x(e).timeRangeForIOFields;if(r){var a=r[0],i=r[1];a!==t("start-date")&&n("start-date",a,{shouldValidate:!0}),i!==t("end-date")&&n("end-date",i,{shouldValidate:!0})}}),[e,n,t])},ce=t(81724),de=t(44695),me=new Date(2014,0,1,0,0,0),he=ce.Ry({"start-date":ce.hT().required("Required"),"end-date":ce.hT().required("Required")}),fe=function(){var e=(0,O.Z)(),n=(0,_.Z)(e.breakpoints.down("sm")),t=(0,o.lr)(),i=(0,r.Z)(t,2),s=i[0],u=i[1],c=(0,te.cI)({defaultValues:{"start-date":null,"end-date":null},mode:"all",criteriaMode:"firstError",shouldUnregister:!0,resolver:(0,de.X)(he)}),m=c.handleSubmit,h=c.reset,f=c.setValue,v=c.getValues,g=c.control,p=c.watch,j=c.formState.errors,y=s.get(d.key);ue(y,f,v);var b=x(y).timeRangeForIOFields,w=p("start-date"),D=function(){var e=(0,ee.Z)((0,J.Z)().mark((function e(n){var t,r;return(0,J.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n["start-date"],r=n["end-date"],Y(s,u,d.key,"from-"+l(t)+"-to-"+l(r));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,Z.jsx)("form",{noValidate:!0,onSubmit:m(D),children:(0,Z.jsxs)(A.Z,{spacing:n?1:3,direction:n?"column":"row",alignItems:"center",justifyContent:"center",sx:{flexWrap:"wrap"},children:[(0,Z.jsx)(ie,{fieldName:"start-date",control:g,minAllowedDate:me,shouldReserveSpaceForErrorMessage:!1}),(0,Z.jsx)(ie,{fieldName:"end-date",control:g,minAllowedDate:w||me,shouldReserveSpaceForErrorMessage:!1}),(0,Z.jsxs)(a.Z,{children:[(0,Z.jsx)(ne.Z,{type:"submit",size:"large",variant:"outlined",disabled:Boolean(Object.keys(j).length),children:"Select time range"}),null!==b?(0,Z.jsx)(se,{searchParams:s,setSearchParams:u,reset:h}):null]})]})})},xe=y.memo(fe),ve=function(){var e=(0,O.Z)(),n=(0,_.Z)(e.breakpoints.down("sm")),t=(0,_.Z)(e.breakpoints.down("xl")),r=(0,_.Z)(e.breakpoints.only("lg"));(0,_.Z)(e.breakpoints.up("lg"));return(0,Z.jsx)(a.Z,{sx:{pt:"0.0rem",flexGrow:0},children:(0,Z.jsxs)(A.Z,{spacing:n?1:3,direction:t?"column":"row",alignItems:r?"end":"center",justifyContent:"center",sx:{flexWrap:"wrap"},children:[(0,Z.jsx)($,{}),(0,Z.jsx)(xe,{})]})})},ge=y.memo(ve),pe=t(68096),je=t(94925),ye=t(99321),Ze=t(23786),be=t(22730),we=function(e){return function(e,n,t){var r=n;return t(e)&&(r=e),r}(e.get(be.yy),be.QR,be.vp)},De=function(){var e=(0,o.lr)(),n=(0,r.Z)(e,2),t=n[0],a=n[1],i=we(t);return(0,Z.jsxs)(pe.Z,{variant:"standard",sx:{m:0,minWidth:"6rem"},children:[(0,Z.jsx)(je.Z,{id:"select-currency-label",children:"Select currency"}),(0,Z.jsxs)(ye.Z,{labelId:"select-currency-label",id:"select-currency",value:i,onChange:function(e){Y(t,a,be.yy,e.target.value)},label:"Select currency",autoWidth:!0,children:[(0,Z.jsx)(Ze.Z,{value:be.sd,children:be.sd}),(0,Z.jsx)(Ze.Z,{value:be.C5,children:be.C5})]})]})},ke=y.memo(De),Ne=function(){var e=(0,y.useState)(!0),n=(0,r.Z)(e,2),t=n[0],o=n[1],l=(0,O.Z)(),s=(0,_.Z)(l.breakpoints.up("lg"));return(0,Z.jsx)(a.Z,{component:"section",children:(0,Z.jsxs)(W,{expanded:t,onChange:function(){return o((function(e){return!e}))},sx:{mb:3},children:[(0,Z.jsx)(G,{expandIcon:(0,Z.jsx)(Q.Z,{}),"aria-controls":"filter-content",id:"filter-header",children:(0,Z.jsx)(i.Z,{children:"Select Criteria"})}),(0,Z.jsx)(L,{sx:{mb:{xs:"1.3rem",lg:"0.5rem"},pt:"1.5rem"},children:(0,Z.jsxs)(A.Z,{direction:s?"row":"column",alignItems:s?"start":"center",justifyContent:s?"space-between":"center",spacing:5,sx:{flexWrap:"wrap"},children:[(0,Z.jsx)(ke,{}),(0,Z.jsx)(ge,{})]})})]})})},Fe=y.memo(Ne),Ie=function(){var e,n;(0,g.Z)(p.a.text);var t=(0,o.lr)(),l=(0,r.Z)(t,1)[0],s=we(l),u=x(l.get(d.key)),c=(0,r.Z)(u.timeRangeForDataFetching,2),m=c[0],h=c[1],f=(0,v.NO)({selectedCurrency:s,startDate:m,endDate:h},{refetchOnMountOrArgChange:!0,refetchOnFocus:!0,refetchOnReconnect:!0}),j=f.error,y=(f.isLoading,f.isFetching),w=f.currentData;return j&&console.log("error: ",j),(0,Z.jsxs)(a.Z,{sx:{display:"flex",flex:"auto",flexDirection:"column"},children:[(0,Z.jsx)(Fe,{}),(0,Z.jsx)(a.Z,{component:"section",sx:{maxWidth:"100%",mt:"1rem"},children:(0,Z.jsx)(i.Z,{variant:"h5",component:"h1",children:"Actual rate ".concat(s,"/PLN: ").concat(null!==(e=null===w||void 0===w||null===(n=w.rates.at(-1))||void 0===n?void 0:n.mid)&&void 0!==e?e:"-"," z\u0142.")})}),(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(M,{rates:null===w||void 0===w?void 0:w.rates,isFetching:y}),(0,Z.jsx)(b,{rates:null===w||void 0===w?void 0:w.rates,isFetching:y})]})]})}}}]);
//# sourceMappingURL=526.94002bf5.chunk.js.map